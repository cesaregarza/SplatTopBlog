{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
<section class="page-hero">
    <h1 class="page-title">{{ page.title }}</h1>
    {% if page.intro %}
        <p class="page-intro">{{ page.intro }}</p>
    {% endif %}
</section>

<section class="posts-grid">
    {% for post in posts %}
        <article class="post-card">
            {% if post.featured_image %}
                <a href="{% pageurl post %}" class="post-card__media">
                    {% image post.featured_image fill-800x400 as img %}
                    <img src="{{ img.url }}" alt="{{ post.title }}">
                </a>
            {% endif %}
            <div class="post-card__content">
                {% if post.date %}
                    <span class="post-card__meta">{{ post.date }}</span>
                {% endif %}
                <h2 class="post-card__title"><a href="{% pageurl post %}">{{ post.title }}</a></h2>
                {% if post.intro %}
                    <p class="post-card__excerpt">{{ post.intro }}</p>
                {% elif post.search_description %}
                    <p class="post-card__excerpt">{{ post.search_description }}</p>
                {% endif %}
            </div>
        </article>
    {% empty %}
        <p class="page-intro">No posts yet.</p>
    {% endfor %}
</section>
{% endblock %}
