{% load static wagtailcore_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% if page.seo_title %}{{ page.seo_title }}{% else %}{{ page.title }}{% endif %}{% endblock %} | SplatTop Blog</title>
    <meta name="description" content="{% block description %}{{ page.search_description }}{% endblock %}">

    <link rel="stylesheet" href="{% static 'css/site.css' %}">
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css"
    >
    {% block extra_css %}{% endblock %}
</head>
<body>
    <div class="page-shell">
        <header class="site-header">
            <div class="container site-header__inner">
                <a href="/" class="site-title">
                    <span class="site-title__mark" aria-hidden="true"></span>
                    <span class="site-title__text">SplatTop Blog</span>
                </a>
            </div>
        </header>

        <main class="container site-main">
            {% block content %}{% endblock %}
        </main>

        <footer class="site-footer">
            <div class="container">
                {% block footer %}{% endblock %}
            </div>
        </footer>
    </div>

    <script
        defer
        src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"
    ></script>
    <script
        defer
        src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js"
    ></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            if (!window.renderMathInElement) return;

            const containers = document.querySelectorAll(".post-content");
            const targets = containers.length ? containers : [document.body];

            targets.forEach((el) => {
                window.renderMathInElement(el, {
                    delimiters: [
                        { left: "$$", right: "$$", display: true },
                        { left: "\\\\[", right: "\\\\]", display: true },
                        { left: "\\\\(", right: "\\\\)", display: false },
                        { left: "$", right: "$", display: false },
                    ],
                    throwOnError: false,
                });
            });
        });
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>
